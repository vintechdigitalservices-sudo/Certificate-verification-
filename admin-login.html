<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login - WeCare</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin:0; padding:0; font-family: 'Inter', sans-serif; }
  body {   
    background: #e6f5ea;   
    display: flex;   
    justify-content: center;   
    align-items: center;   
    min-height: 100vh;   
  }  

  .login-container {  
    background: #fff;  
    padding: 40px 30px;  
    border-radius: 15px;  
    width: 100%;  
    max-width: 400px;  
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);  
    text-align: center;  
    position: relative;
  }  

  h2 { color: #28a745; margin-bottom: 20px; }  

  .input-group { position: relative; margin-bottom: 15px; }
  input[type="email"], input[type="password"] {  
    width: 100%;  
    padding: 12px 15px;  
    border-radius: 8px;  
    border: 1px solid #ccc;  
    font-size: 16px;  
    transition: 0.3s;  
  }  
  input:focus { border-color: #28a745; outline: none; }  

  .toggle-password { 
    position: absolute; 
    right: 12px; 
    top: 50%; 
    transform: translateY(-50%); 
    cursor: pointer; 
    font-size: 18px;
    user-select: none;
  }

  button {  
    padding: 12px 25px;  
    background: #28a745;  
    border: 2px solid #001f54;  
    border-radius: 8px;  
    color: #fff;  
    font-size: 16px;  
    cursor: pointer;  
    transition: 0.3s;  
    width: 100%;  
  }  
  button:hover { background: #218838; }  

  .error {   
    color: red;   
    margin-bottom: 15px;   
    display: none;   
    padding: 8px;  
    background: #ffe5e5;  
    border-radius: 5px;  
  }
</style>
</head>
<body>

<div class="login-container">
  <h2>Admin Login</h2>
  <div class="error" id="errorMsg"></div>

  <div class="input-group">
    <input type="email" id="email" placeholder="Enter admin email">
  </div>

  <div class="input-group">
    <input type="password" id="password" placeholder="Enter password">
    <span class="toggle-password" id="togglePassword">&#128065;</span>
  </div>

  <button id="loginBtn">Login</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBIM_jh15J2riP1XXtxP4hCmlbx1BqK5-8",
    authDomain: "wecare--verification.firebaseapp.com",
    projectId: "wecare--verification",
    storageBucket: "wecare--verification.firebasestorage.app",
    messagingSenderId: "198997154830",
    appId: "1:198997154830:web:a732dc7abc306ed1a5f05f"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginBtn = document.getElementById("loginBtn");
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const errorMsg = document.getElementById("errorMsg");
  const togglePassword = document.getElementById("togglePassword");

  // Toggle password visibility
  togglePassword.addEventListener("click", () => {
    const type = passwordInput.type === "password" ? "text" : "password";
    passwordInput.type = type;
    togglePassword.textContent = type === "password" ? "ðŸ‘ï¸" : "ðŸ™ˆ";
  });

  loginBtn.addEventListener("click", async () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if (!email || !password) {
      errorMsg.style.display = "block";
      errorMsg.textContent = "Enter both email and password.";
      return;
    }

    try {
      const userCredential = await signInWithEmailAndPassword(auth, email, password);
      const user = userCredential.user;

      // Ensure only admin email can login
      if (user.email !== "academy@wecarenigeria.com") {
        await auth.signOut();
        errorMsg.style.display = "block";
        errorMsg.textContent = "Unauthorized email. Only the admin can log in.";
        return;
      }

      // Redirect to admin panel
      window.location.href = "admin.html";

    } catch (error) {
      errorMsg.style.display = "block";
      errorMsg.textContent = "Incorrect email or password.";
      console.error(error);
    }
  });
</script>

</body>
</html>